function WebGLProperties() {

	let properties = new WeakMap();

	function get(object, initObject) {

		// return object;

		let map = properties.get(object);

		if (map === undefined) {

			map = initObject || {};
			properties.set(object, map);

			function onMaterialDispose() {
				properties.delete(object);
				object.removeEventListener('dispose', onMaterialDispose)
			}
			object.addEventListener('dispose', onMaterialDispose)

		}

		return map;

	}

	function remove(object) {

		properties.delete(object);

	}

	function update(object, key, value) {

		properties.get(object)[key] = value;

	}

	this.properties = properties
	this.get = get
	this.remove = remove
	this.update = update
	this.dispose = function () {
		properties = new WeakMap();
		this.properties = properties
	}

}


export default WebGLProperties;
